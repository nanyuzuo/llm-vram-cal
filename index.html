<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM æ˜¾å­˜è®¡ç®—å™¨ (VRAM Calculator)</title>
    <!-- å¼•å…¥ Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- å¼•å…¥ Tailwind CSS ç¾åŒ–ç•Œé¢ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å›¾æ ‡åº“ -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f3f4f6; }
        .slider-thumb::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: #3b82f6; cursor: pointer; border-radius: 50%; }
        [v-cloak] { display: none; }
    </style>
</head>
<body class="text-gray-800">

<div id="app" v-cloak class="max-w-3xl mx-auto p-4 sm:p-8">
    
    <!-- æ ‡é¢˜åŒº -->
    <div class="text-center mb-10">
        <h1 class="text-4xl font-bold text-gray-900 mb-2">ğŸš€ å¤§æ¨¡å‹æ˜¾å­˜è®¡ç®—å™¨</h1>
        <p class="text-gray-500">è¾“å…¥ HuggingFace æ¨¡å‹ IDï¼Œä¸€é”®è®¡ç®—æœ¬åœ°éƒ¨ç½²æ‰€éœ€æ˜¾å­˜</p>
    </div>

    <!-- è¾“å…¥æ§åˆ¶åŒº -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8 transition-all duration-300 hover:shadow-xl">
        
        <!-- 1. æ¨¡å‹åç§°è¾“å…¥ -->
        <div class="mb-6 relative">
            <label class="block text-sm font-medium text-gray-700 mb-2">æ¨¡å‹åç§° (HuggingFace ID)</label>
            <div class="flex gap-2">
                <input 
                    v-model="modelId" 
                    @keyup.enter="fetchModelInfo"
                    type="text" 
                    placeholder="ä¾‹å¦‚: meta-llama/Meta-Llama-3-8B-Instruct" 
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition"
                >
                <button 
                    @click="fetchModelInfo" 
                    :disabled="loading"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition flex items-center gap-2 disabled:opacity-50">
                    <i v-if="loading" class="fas fa-spinner fa-spin"></i>
                    <span v-else>æœç´¢</span>
                </button>
            </div>
            <!-- å¿«æ·æ¨è -->
            <div class="mt-2 text-xs text-gray-500 flex gap-2 flex-wrap">
                <span class="cursor-pointer hover:text-blue-600 underline" @click="setModel('Qwen/Qwen2.5-7B-Instruct')">Qwen2.5-7B</span>
                <span class="cursor-pointer hover:text-blue-600 underline" @click="setModel('meta-llama/Meta-Llama-3-8B-Instruct')">Llama-3-8B (éœ€Token)</span>
                <span class="cursor-pointer hover:text-blue-600 underline" @click="setModel('mistralai/Mistral-7B-Instruct-v0.2')">Mistral-7B</span>
                <span class="cursor-pointer hover:text-blue-600 underline" @click="setModel('Qwen/Qwen1.5-14B-Chat')">Qwen1.5-14B</span>
                <span class="cursor-pointer hover:text-blue-600 underline" @click="setModel('01-ai/Yi-34B-Chat')">Yi-34B</span>
            </div>

            <!-- Token è¾“å…¥ -->
            <div class="mt-4">
                <details class="text-sm text-gray-500">
                    <summary class="cursor-pointer hover:text-blue-600 select-none flex items-center gap-1">
                        <i class="fas fa-key"></i> é…ç½® HF Token (è®¿é—®é—¨æ§æ¨¡å‹)
                    </summary>
                    <div class="mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200">
                        <label class="block text-xs font-medium text-gray-700 mb-1">Hugging Face Access Token</label>
                        <input 
                            v-model="hfToken" 
                            type="password" 
                            placeholder="hf_..." 
                            class="w-full p-2 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none bg-white"
                        >
                        <p class="mt-1 text-xs text-gray-400">Token ä»…ç”¨äºæœ¬æ¬¡è¯·æ±‚ï¼Œä¸ä¼šä¸Šä¼ æœåŠ¡å™¨ã€‚</p>
                    </div>
                </details>
            </div>
        </div>

        <!-- é”™è¯¯æç¤º -->
        <div v-if="error" class="bg-red-50 text-red-600 p-3 rounded-lg mb-4 text-sm flex items-center gap-2">
            <i class="fas fa-exclamation-circle"></i> {{ error }}
        </div>

        <div v-if="modelConfig" class="animate-fade-in">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- 2. é‡åŒ–é€‰æ‹© -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æ¨¡å‹æƒé‡ç²¾åº¦</label>
                        <select v-model="quantization" class="w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="fp16">BF16 / FP16 (åŸç‰ˆ)</option>
                            <option value="q8">Int8 (8-bit)</option>
                            <option value="q6_k">Q6_K (GGUF)</option>
                            <option value="q5_k_m">Q5_K_M (æ¨èå‡è¡¡)</option>
                            <option value="q4_k_m">Q4_K_M (æœ€å¸¸ç”¨)</option>
                            <option value="q3_k_m">Q3_K_M (æé™å‹ç¼©)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">KV Cache ç²¾åº¦</label>
                        <select v-model="kvPrecision" class="w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="fp16">FP16 (é»˜è®¤)</option>
                            <option value="int8">Int8 / FP8</option>
                            <option value="int4">Int4</option>
                        </select>
                    </div>
                </div>

                <!-- 3. ä¸Šä¸‹æ–‡é•¿åº¦æ»‘å— -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 flex justify-between">
                        <span>ä¸Šä¸‹æ–‡çª—å£ (Context Length)</span>
                        <span class="text-blue-600 font-bold">{{ contextLength.toLocaleString() }} tokens</span>
                    </label>
                    <input 
                        type="range" 
                        v-model.number="contextLength" 
                        min="512" 
                        max="131072" 
                        step="512"
                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-thumb"
                    >
                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                        <span>512</span>
                        <span>32k</span>
                        <span>128k</span>
                    </div>
                </div>
            </div>

            <!-- æ¨¡å‹åŸºæœ¬ä¿¡æ¯å±•ç¤º -->
            <div class="bg-blue-50 p-3 rounded-lg text-sm text-blue-800 flex flex-wrap gap-4 mb-6">
                <div><i class="fas fa-layer-group"></i> å±‚æ•°: <b>{{ modelConfig.num_hidden_layers }}</b></div>
                <div><i class="fas fa-ruler-horizontal"></i> ç»´åº¦: <b>{{ modelConfig.hidden_size }}</b></div>
                <div><i class="fas fa-brain"></i> æ³¨æ„åŠ›å¤´: <b>{{ modelConfig.num_attention_heads }}</b></div>
                <div><i class="fas fa-key"></i> Attention: <b>{{ attnType }}</b></div>
                <div><i class="fas fa-weight-hanging"></i> ä¼°ç®—å‚æ•°é‡: <b>{{ (estimatedParams / 1000000000).toFixed(2) }}B</b></div>
            </div>
        </div>
    </div>

    <!-- ç»“æœå±•ç¤ºåŒº -->
    <div v-if="modelConfig" class="grid grid-cols-1 md:grid-cols-3 gap-6">
        
        <!-- æ€»æ˜¾å­˜å¡ç‰‡ -->
        <div class="md:col-span-2 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white relative overflow-hidden">
            <div class="relative z-10">
                <h3 class="text-lg opacity-90 mb-1">é¢„è®¡æ‰€éœ€æ€»æ˜¾å­˜</h3>
                <div class="text-5xl font-bold mb-4">{{ totalVram.toFixed(1) }} GB</div>
                
                <!-- è¿›åº¦æ¡å¯è§†åŒ– -->
                <div class="w-full bg-blue-900/50 h-4 rounded-full overflow-hidden flex mb-2">
                    <div class="bg-yellow-400 h-full" :style="{ width: (vramStats.weights / totalVram * 100) + '%' }" title="æ¨¡å‹æƒé‡"></div>
                    <div class="bg-green-400 h-full" :style="{ width: (vramStats.kv / totalVram * 100) + '%' }" title="KV Cache"></div>
                    <div class="bg-gray-400 h-full" :style="{ width: (vramStats.overhead / totalVram * 100) + '%' }" title="ç³»ç»Ÿå¼€é”€"></div>
                </div>
                <div class="flex gap-4 text-xs opacity-80">
                    <span class="flex items-center gap-1"><div class="w-2 h-2 bg-yellow-400 rounded-full"></div> æƒé‡</span>
                    <span class="flex items-center gap-1"><div class="w-2 h-2 bg-green-400 rounded-full"></div> ä¸Šä¸‹æ–‡(KV)</span>
                    <span class="flex items-center gap-1"><div class="w-2 h-2 bg-gray-400 rounded-full"></div> ç³»ç»Ÿé¢„ç•™</span>
                </div>
            </div>
            <!-- èƒŒæ™¯è£…é¥° -->
            <i class="fas fa-microchip absolute -bottom-4 -right-4 text-9xl text-white opacity-10"></i>
        </div>

        <!-- æ¨èæ˜¾å¡å¡ç‰‡ -->
        <div class="bg-white rounded-xl shadow-lg p-6 flex flex-col justify-center items-center text-center border-t-4" :class="gpuRecommendation.color">
            <h3 class="text-gray-500 font-medium mb-2">æ¨èæ˜¾å¡é…ç½®</h3>
            <div class="text-2xl font-bold text-gray-800 mb-2">{{ gpuRecommendation.name }}</div>
            <span class="px-3 py-1 rounded-full text-sm font-medium" :class="gpuRecommendation.badgeBg">{{ gpuRecommendation.vram }} VRAM</span>
        </div>

        <!-- è¯¦ç»†æ˜ç»† -->
        <div class="md:col-span-3 bg-white rounded-xl shadow p-6">
            <h3 class="font-bold text-gray-700 mb-4 border-b pb-2">è¯¦ç»†æ¶ˆè€—æ˜ç»†</h3>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm">
                <div class="p-3 bg-yellow-50 rounded border border-yellow-100">
                    <div class="text-gray-500 mb-1">é™æ€æƒé‡ (Model Weights)</div>
                    <div class="text-xl font-semibold text-yellow-700">{{ vramStats.weights.toFixed(2) }} GB</div>
                    <div class="text-xs text-gray-400 mt-1">å–å†³äºå‚æ•°é‡å’Œé‡åŒ–ç²¾åº¦</div>
                </div>
                <div class="p-3 bg-green-50 rounded border border-green-100">
                    <div class="text-gray-500 mb-1">KV Cache (ä¸Šä¸‹æ–‡)</div>
                    <div class="text-xl font-semibold text-green-700">{{ vramStats.kv.toFixed(2) }} GB</div>
                    <div class="text-xs text-gray-400 mt-1">Type: {{ attnType }} {{ isMLA ? 'âœ¨' : (isGQA ? 'âœ…' : '') }}</div>
                </div>
                <div class="p-3 bg-gray-50 rounded border border-gray-100">
                    <div class="text-gray-500 mb-1">ç³»ç»Ÿå¼€é”€ (Overhead)</div>
                    <div class="text-xl font-semibold text-gray-700">{{ vramStats.overhead.toFixed(2) }} GB</div>
                    <div class="text-xs text-gray-400 mt-1">CUDAå†…æ ¸ + æ¿€æ´»å€¼ç¼“å†²åŒº</div>
                </div>
            </div>
        </div>

    </div>
    
    <div class="mt-12 text-center text-sm text-gray-400">
        <p>æ­¤å·¥å…·ä»…ä¸ºä¼°ç®—ï¼Œå®é™…å ç”¨å¯èƒ½å—å…·ä½“æ¨ç†æ¡†æ¶ï¼ˆvLLM, llama.cpp, HFï¼‰å½±å“ã€‚</p>
        <p>Powered by Vue.js & HuggingFace API</p>
    </div>

</div>

<script>
    const { createApp, ref, computed, watch } = Vue;

    createApp({
        setup() {
            const modelId = ref('Qwen/Qwen2.5-7B-Instruct'); // æ”¹ä¸ºéé—¨æ§æ¨¡å‹ä½œä¸ºé»˜è®¤
            const hfToken = ref(''); // æ–°å¢ Token å­˜å‚¨
            const loading = ref(false);
            const error = ref(null);
            const modelConfig = ref(null);
            
            // ç”¨æˆ·è®¾ç½®
            const contextLength = ref(8192);
            const quantization = ref('q4_k_m');
            const kvPrecision = ref('fp16');

            // å¿«æ·è®¾ç½®æ¨¡å‹
            const setModel = (name) => {
                modelId.value = name;
                fetchModelInfo();
            };

            // è·å– HF æ¨¡å‹ä¿¡æ¯
            const fetchModelInfo = async () => {
                if (!modelId.value) return;
                loading.value = true;
                error.value = null;
                modelConfig.value = null;

                try {
                    // æ„å»ºè¯·æ±‚å¤´
                    const headers = {};
                    if (hfToken.value) {
                        headers['Authorization'] = `Bearer ${hfToken.value}`;
                    }

                    // ä½¿ç”¨ HF API è·å– Config
                    const response = await fetch(`https://huggingface.co/api/models/${modelId.value}`, { headers });
                    
                    if (response.status === 401 || response.status === 403) {
                        throw new Error('éœ€è¦ HuggingFace Token è®¿é—®è¯¥æ¨¡å‹ (é—¨æ§æ¨¡å‹)');
                    }
                    
                    if (!response.ok) throw new Error('æœªæ‰¾åˆ°æ¨¡å‹æˆ–è¿æ¥ HF å¤±è´¥');
                    
                    const data = await response.json();
                    let config = data.config;

                    // æ£€æŸ¥ Config å®Œæ•´æ€§ï¼Œå¦‚æœä¸å®Œæ•´åˆ™ç›´æ¥è·å– config.json
                    // API è¿”å›çš„ config æœ‰æ—¶ä¼šç¼ºå¤± num_hidden_layers ç­‰å…³é”®å­—æ®µ (ä¾‹å¦‚ Qwen ç³»åˆ—)
                    if (!config || !config.num_hidden_layers || !config.hidden_size) {
                        let configErr = null;
                        try {
                            const configResponse = await fetch(`https://huggingface.co/${modelId.value}/resolve/main/config.json`, { headers });
                            if (configResponse.ok) {
                                const fullConfig = await configResponse.json();
                                config = { ...config, ...fullConfig };
                            } else {
                                if (configResponse.status === 401 || configResponse.status === 403) {
                                    configErr = 'æƒé™ä¸è¶³ï¼šæ— æ³•è¯»å–é…ç½®æ–‡ä»¶ (401/403)ã€‚è¯·æ£€æŸ¥ Token æƒé™æˆ–æ˜¯å¦å·²ç­¾ç½²æ¨¡å‹åè®®ã€‚';
                                } else {
                                    configErr = `æ— æ³•è¯»å–é…ç½®æ–‡ä»¶ (Status ${configResponse.status})`;
                                }
                            }
                        } catch (e) {
                            console.warn('Fetching config.json failed', e);
                            configErr = 'è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥ (ç½‘ç»œé”™è¯¯æˆ–è·¨åŸŸé™åˆ¶)';
                        }

                        // å¦‚æœä»ç„¶ç¼ºå°‘å…³é”®å­—æ®µï¼ŒæŠ›å‡ºå…·ä½“é”™è¯¯
                        if (!config || !config.num_hidden_layers || !config.hidden_size) {
                             throw new Error(configErr || 'æ¨¡å‹é…ç½®æ–‡ä»¶ä¸å®Œæ•´ (ç¼ºå¤± layers/hidden_size)ï¼Œä¸”æ— æ³•é€šè¿‡ API è·å–ã€‚');
                        }
                    }

                    if (!config) throw new Error('æ— æ³•è¯»å–è¯¥æ¨¡å‹çš„ Config ä¿¡æ¯');

                    modelConfig.value = config;
                    
                    // è‡ªåŠ¨è°ƒæ•´é»˜è®¤ä¸Šä¸‹æ–‡çª—å£
                    if (data.config.max_position_embeddings) {
                        const maxCtx = data.config.max_position_embeddings;
                        contextLength.value = maxCtx > 32000 ? 8192 : Math.min(maxCtx, 8192);
                    }

                } catch (e) {
                    error.value = e.message;
                } finally {
                    loading.value = false;
                }
            };

            // 1. ä¼°ç®—å‚æ•°é‡ (Billion)
            // å¦‚æœ API æ²¡æœ‰ç›´æ¥è¿”å›å‚æ•°é‡ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ¶æ„ä¼°ç®—
            const estimatedParams = computed(() => {
                if (!modelConfig.value) return 0;
                const c = modelConfig.value;
                
                // æ ¸å¿ƒå‚æ•°
                const L = c.num_hidden_layers || 32;
                const H = c.hidden_size || 4096;
                const V = c.vocab_size || 32000;
                
                // Expert Intermediate Size
                // DeepSeek V2/V3 uses moe_intermediate_size
                const expertSize = c.moe_intermediate_size || c.intermediate_size || (H * 4);
                
                // MoE (Mixture of Experts) æ£€æµ‹
                // n_routed_experts: DeepSeek V2/V3
                // num_local_experts: Mixtral
                // num_experts: Qwen-MoE
                const numRoutedExperts = c.n_routed_experts || c.num_local_experts || c.num_experts || 0;
                const numSharedExperts = c.n_shared_experts || 0;
                
                const isMoE = numRoutedExperts > 0;
                const totalExperts = isMoE ? (numRoutedExperts + numSharedExperts) : 1;

                // ç®€å•ä¼°ç®—å…¬å¼
                // Attn = 4 * H^2 (query, key, value, out)
                const attnParams = 4 * H * H; 
                
                // MLP (SwiGLU) = 3 * H * expertSize * totalExperts
                const mlpParams = totalExperts * 3 * H * expertSize;
                
                const layerParams = attnParams + mlpParams;
                
                const total = (L * layerParams) + (V * H);
                
                return total;
            });

            // 2. Attention ç±»å‹æ£€æµ‹ (GQA / MLA)
            const attnType = computed(() => {
                if (!modelConfig.value) return 'Standard';
                const c = modelConfig.value;
                // MLA (DeepSeek V2/V3)
                if (c.kv_lora_rank && c.kv_lora_rank > 0) return 'MLA';
                // GQA
                const kv = c.num_key_value_heads;
                const attn = c.num_attention_heads;
                if (kv && kv < attn) return 'GQA';
                return 'Standard';
            });

            // å…¼å®¹æ—§å˜é‡ç”¨äºæ˜¾ç¤º
            const isGQA = computed(() => attnType.value === 'GQA');
            const isMLA = computed(() => attnType.value === 'MLA');

            // 3. è®¡ç®—å„é¡¹æ˜¾å­˜
            const vramStats = computed(() => {
                if (!modelConfig.value) return { weights: 0, kv: 0, overhead: 0 };

                // A. æƒé‡æ˜¾å­˜
                // é‡åŒ–ç³»æ•° (Bytes per param)
                // FP16 = 2, Q8 = 1, Q4_K_M â‰ˆ 0.65 (å« overhead), Q6 â‰ˆ 0.75
                const bpwMap = {
                    'fp16': 2.0,
                    'q8': 1.0,
                    'q6_k': 0.75, // approximate
                    'q5_k_m': 0.68,
                    'q4_k_m': 0.60, // åŠ ä¸Š metadata å®é™…ä¸Šé€šå¸¸åœ¨ 0.6 å·¦å³
                    'q3_k_m': 0.48
                };
                const bpw = bpwMap[quantization.value] || 2.0;
                const weightsVram = (estimatedParams.value * bpw) / (1024 ** 3); // GB

                // B. KV Cache æ˜¾å­˜
                const c = modelConfig.value;
                const layers = c.num_hidden_layers;
                const seq = contextLength.value;
                
                // KV é‡åŒ–ç³»æ•°
                const kvBpwMap = { 'fp16': 2.0, 'int8': 1.0, 'int4': 0.5 };
                const kvBpw = kvBpwMap[kvPrecision.value] || 2.0;

                let kvBytesPerToken = 0;

                if (attnType.value === 'MLA') {
                    // DeepSeek MLA: Compressed KV
                    // Cache = (kv_lora_rank + qk_rope_head_dim) * Layers
                    const kvLoraRank = c.kv_lora_rank || 512;
                    const qkRopeHeadDim = c.qk_rope_head_dim || 64;
                    const dim = kvLoraRank + qkRopeHeadDim;
                    kvBytesPerToken = layers * dim * kvBpw; 
                } else {
                    // Standard / GQA
                    const heads = c.num_attention_heads;
                    const kvHeads = c.num_key_value_heads || heads;
                    
                    // ä¼˜å…ˆä½¿ç”¨ config.head_dimï¼Œå¦åˆ™ä½¿ç”¨ hidden/heads
                    const headDim = c.head_dim || (c.hidden_size / heads);
                    
                    // Cache = 2 * Layers * KV_Heads * HeadDim * BytesPerElement
                    kvBytesPerToken = 2 * layers * kvHeads * headDim * kvBpw; 
                }
                
                const kvVram = (kvBytesPerToken * seq) / (1024 ** 3);

                // C. ç³»ç»Ÿå¼€é”€ (Overhead)
                // åŒ…å« CUDA Context (çº¦ 500MB-1GB) + Activation Buffer (ä¸´æ—¶å˜é‡)
                // ä¸´æ—¶å˜é‡é€šå¸¸ä¸ batch size å’Œ context æœ‰å…³ï¼Œè¿™é‡Œç»™ä¸€ä¸ªåŸºç¡€å€¼
                let overhead = 0.6; // åŸºç¡€ 600MB
                // éšç€ context å¢åŠ ï¼Œæ¿€æ´»å€¼ä¹Ÿä¼šå¢åŠ 
                overhead += (kvVram * 0.1); // ç®€å•ä¼°ç®—

                return {
                    weights: weightsVram,
                    kv: kvVram,
                    overhead: overhead
                };
            });

            const totalVram = computed(() => {
                const s = vramStats.value;
                return s.weights + s.kv + s.overhead;
            });

            // 4. æ˜¾å¡æ¨èé€»è¾‘
            const gpuRecommendation = computed(() => {
                const v = totalVram.value;
                if (v <= 6) return { name: 'RTX 3060 / 4060 (6G+)', vram: '8GB', color: 'border-green-500', badgeBg: 'bg-green-100 text-green-800' };
                if (v <= 8) return { name: 'RTX 3070 / 4060Ti', vram: '8GB', color: 'border-green-500', badgeBg: 'bg-green-100 text-green-800' };
                if (v <= 11) return { name: 'RTX 2080Ti / 3080 (10G+)', vram: '12GB', color: 'border-blue-500', badgeBg: 'bg-blue-100 text-blue-800' };
                if (v <= 12) return { name: 'RTX 3060 12G / 4070', vram: '12GB', color: 'border-blue-500', badgeBg: 'bg-blue-100 text-blue-800' };
                if (v <= 16) return { name: 'RTX 4080 / 4060Ti 16G', vram: '16GB', color: 'border-indigo-500', badgeBg: 'bg-indigo-100 text-indigo-800' };
                if (v <= 24) return { name: 'RTX 3090 / 4090', vram: '24GB', color: 'border-purple-500', badgeBg: 'bg-purple-100 text-purple-800' };
                if (v <= 48) return { name: 'RTX 6000 / A6000', vram: '48GB', color: 'border-purple-500', badgeBg: 'bg-purple-100 text-purple-800' };
                return { name: 'Mac Studio / å¤šå¡å¹¶è”', vram: '>48GB', color: 'border-red-500', badgeBg: 'bg-red-100 text-red-800' };
            });

            // åˆå§‹åŒ–
            fetchModelInfo();

            return {
                modelId, hfToken, loading, error, modelConfig, 
                contextLength, quantization, kvPrecision, setModel, fetchModelInfo,
                estimatedParams, isGQA, isMLA, attnType, vramStats, totalVram, gpuRecommendation
            };
        }
    }).mount('#app');
</script>
</body>
</html>

